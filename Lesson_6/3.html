<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
    integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
    crossorigin="anonymous" />
  <style>
    i {
      font-size: 50px;
    }

    .golden {
      color: gold;
    }
  </style>
</head>

<body>
  <!--
Необязательное задание.

Выполнить все задачи в теге script. Комментарии, в которых написаны задачи, не
стирать, код с решением задачи пишем под комментарием.
-->

  <div class="stars_container">
    <i class="fas fa-star"></i>
    <i class="fas fa-star"></i>
    <i class="fas fa-star"></i>
    <i class="fas fa-star"></i>
    <i class="fas fa-star"></i>
  </div>

  <script>
    "use strict";

    /*
    1. При наведении на любую из звезд, данной звезде должен ставиться класс
    golden, также такой класс должен ставиться всем звездам до нее слева.
    */


    /* Дошёл экспериментальным путём с помощью отладчика что нужно два раза вызывать previousSibling, чтобы получить элемент, иначе сначала возвращает #text, потом сам элемент. Почему так? гуглил конечно по этому вопросу, но пока ответа не нашёл) */

    let stars = document.querySelectorAll('.fa-star');
    stars.forEach(function (item) {
      item.addEventListener('mouseover', function (event) {
        item.classList.add('golden');
        let prevStar = item.previousSibling.previousSibling;
        while (prevStar) {
          prevStar.classList.add('golden');
          prevStar = prevStar.previousSibling.previousSibling;
        }
      });
    });

    /*
    2. Когда мы уводим курсор мыши от звезды, все поставленные классы из первого
    задания должны быть удалены.
     */

    stars.forEach(function (item) {
      item.addEventListener('mouseout', function (event) {
        item.classList.remove('golden');
        let prevStar = item.previousSibling.previousSibling;
        while (prevStar) {
          setTimeout(prevStar.classList.remove('golden'), 5000);
          prevStar = prevStar.previousSibling.previousSibling;
        }
      });
    });

    /*
    3. Когда мы переводим мышь от одной звезды к другой, у нас могут мигать
    звезды (временно могут становиться черными). Почему так? Напишите словами.
    Можем ли мы это исправить? Если да, то предложите решение.

    Так происходит потому что мы при переходе от одной звезды к другой генерируется событие mouseout и удаляет класс golden у всех предыдущих элементов, далее генерируется событие mouseover и добавляет класс элементам.
    Есть идея как это можно исправить, к сожалению нет времени попробовать её реализовать. Смысл следующий: работать с div-ом, в котором находятся звёзды. Берём событие mouseover над этим div-ом, определяем элементы по координатам, которые находятся слева от курсора или под ним, назначаем класс golden если он ещё не назначен, тем что справа убираем, если он есть.
    Далее событие mousemove контролирует перемещение внутри div-а, пока активен mouseover. При событии mouseout у div-а убираем класс golden всем элементам.
    */


  </script>
</body>

</html>